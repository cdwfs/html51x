<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
	</head>
	<body>
		<canvas id="myCanvas" width="200" height="200"
			style="border:1px solid black">
			Canvas is not supported by your browser. WTF dude.
		</canvas>

		<canvas id="myCanvas2" width="500" height="400"
			style="border:1px solid blue">
			Canvas is not supported by your browser. WTF dude.
		</canvas>

		<video width="272" height="480" controls="controls" id="pitchVideo" 
			poster="pitch-poster.jpg">
			<source src="pitch.mp4" preload="none" type="video/mp4"/>
			Your browser doesn't support the &lt;video&gt; element. You can <A HREF="pitch.mp4" download="pitch.mp4">download</A> the file instead.
		</video>

		<script>
		"use strict";
		function myCanvasInit() {
			var canvas = document.querySelector("#myCanvas");
			var ctx = canvas.getContext("2d");
			
			// Draw some stuff
			ctx.fillRect(10,10, 100, 100);
			ctx.strokeStyle="blue"
			ctx.fillStyle = "red";
			ctx.strokeRect(30,30, 100, 100); // ignores fillStyle
			ctx.clearRect(50,50, 50,50);
			
			ctx.save();
			ctx.translate(20,100);
			ctx.rotate(-Math.PI/4);
			ctx.font = "italic 20pt Calibri";
			ctx.fillText("Boogies", 0,0, 70,22);
			ctx.restore();
			
			ctx.fillStyle = "lightblue";
			ctx.fillRect(100,100, 20,20);
			
			// asynchronous image load/draw
			var imageObj = new Image();
			imageObj.onload = function() {
				ctx.save();
				ctx.globalAlpha = 0.5;
				ctx.translate(75,20);
				ctx.drawImage(imageObj,0,0, 100,150);
				
				ctx.translate(0,150-50);
				ctx.drawImage(imageObj, 0,0,512,100, 0,0,100,25);
				ctx.restore();
			}
			imageObj.src = "html5.jpg";
			
			setInterval("processFrame()", 17); // call each 25 ms
		}
		var angle = 0;
		function processFrame() {
			console.time("draw timer");
			var canvas2 = document.querySelector("#myCanvas2");
			var ctx2 = canvas2.getContext("2d");
			var video = document.querySelector("#pitchVideo");
			ctx2.clearRect(0,0,canvas2.width, canvas2.height);
			ctx2.save();
			ctx2.translate( canvas2.width/2,  canvas2.height/2);
			ctx2.rotate(angle);
			ctx2.translate(-canvas2.width/2, -canvas2.height/2);
			angle += 0.001;
			ctx2.drawImage(video, 0,0, canvas2.width, canvas2.height);
			ctx2.restore();
			console.timeEnd("draw timer");
		}
		window.onload = myCanvasInit; // Don't grab a context until the page is ready!
		</script>
	</body>
</html>
